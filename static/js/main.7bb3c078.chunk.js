(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{26:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(21),s=n.n(r),i=(n(26),n(6)),o=n.n(i),d=n(9),l=n(4),u=n(10),j=n.n(u),p=n(5),h=n(1);var b=function(e){var t=e.onChangeCity,n=Object(a.useState)(null),c=Object(l.a)(n,2),r=c[0],s=c[1];return Object(h.jsxs)("form",{className:"search",onSubmit:function(e){e.preventDefault(),t(r)},children:[Object(h.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("button",{type:"submit",children:Object(h.jsx)(p.c,{className:"icon"})})]})},m={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=window.navigator.userLanguage||window.navigator.language,a=new Intl.DateTimeFormat(n,t).format(e);return a};var O=function(e){var t=e.onChangeCity,n=Object(a.useState)(new Date),c=Object(l.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){s(new Date)}),6e4);return function(){return clearInterval(e)}}),[r]),Object(h.jsxs)("header",{children:[Object(h.jsxs)("div",{className:"header-left",children:[Object(h.jsx)("div",{className:"logo",children:"Weather Forecast"}),Object(h.jsx)("div",{className:"date",children:v(r)})]}),Object(h.jsx)(b,{onChangeCity:t})]})};n(47);var x=function(){return Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)("div",{className:"spinner",children:Object(h.jsx)("span",{})})})},f=n(11),g=function(e){return(e-272.15).toFixed(1)};var y=function(e){var t=e.time,n=e.icon,a=e.wind,c=e.humidity,r=e.temp;return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsxs)("div",{className:"card-title",children:[Object(h.jsx)(p.b,{})," ",t]}),Object(h.jsx)("div",{className:"card-weather-icon",children:Object(h.jsx)("img",{className:"icon",src:"http://openweathermap.org/img/wn/".concat(n,"@2x.png"),alt:"rain"})}),Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsxs)("div",{className:"wind",children:[Object(h.jsx)(f.b,{className:"icon"}),Object(h.jsxs)("span",{children:[a.toFixed(2)," m/s"]})]}),Object(h.jsxs)("div",{className:"humidity",children:[Object(h.jsx)(f.a,{className:"icon"}),Object(h.jsxs)("span",{children:[c,"%"]})]})]}),Object(h.jsxs)("div",{className:"card-degree",children:[g(r),"\xb0"]})]})};var w=function(e){var t=e.list;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"card-list",children:function(){var e,n=!0;return t.map((function(t){var a=t.dt_txt.split(" "),r=Object(l.a)(a,2),s=r[0],i=r[1];return s===e?n=!1:(n=!0,e=s),Object(h.jsxs)(c.a.Fragment,{children:[n?Object(h.jsxs)("h3",{className:"card-date",children:[Object(h.jsx)(p.a,{}),v(new Date(s),{weekday:"long"}),", ",s]}):null,Object(h.jsx)(y,{time:i,icon:t.weather[0].icon,wind:t.wind.speed,humidity:t.main.humidity,temp:t.main.temp})]},t.dt)}))}()})})},N="http://api.ipstack.com/check?access_key=e4b9442b71904780687608c088df7aa3",k="&appid=a0ded0e78843e07315d41e6394b36453",C=function(e,t){switch(t.type){case"loading":return{response:void 0,isLoading:!0,error:void 0};case"success":return{response:t.payload,isLoading:!1,error:void 0};case"error":return{response:void 0,isLoading:!1,error:t.payload};default:return{response:void 0,isLoading:!1,error:"Invalid action"}}},L=function(e,t){var n={response:void 0,isLoading:!1,error:void 0},c=Object(a.useReducer)(C,n),r=Object(l.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){function n(){return(n=Object(d.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j()(e,t);case 3:a=n.sent,i({type:"success",payload:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),i({type:"error",payload:"Sorry, we couldn't indentify your city. Please confirm and use our search tool."});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}i({type:"loading"}),function(){n.apply(this,arguments)}()}),[e,t]),s};var S=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(l.a)(r,2),i=s[0],u=s[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()(N);case 3:t=e.sent,console.log(t.data.city),c(t.data.city),u(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var p=L("".concat("http://api.openweathermap.org/data/2.5/forecast?q=").concat(n).concat(k)),b=p.response,m=p.isLoading,v=p.error,f=L("".concat("http://api.openweathermap.org/data/2.5/weather?q=").concat(n).concat(k)),y=f.response,C=(f.isLoading,f.error);return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(O,{onChangeCity:c}),C&&i?null:y?Object(h.jsxs)("div",{className:"banner",children:[Object(h.jsx)("h2",{children:n}),Object(h.jsxs)("span",{className:"degree",children:[g(y.data.main.temp),"\xb0"]})]}):void 0,v&&i?Object(h.jsx)("p",{className:"error",children:v}):m&&!b&&i?Object(h.jsx)(x,{}):b?(console.log(b.data),Object(h.jsx)("main",{children:Object(h.jsx)(w,{list:b.data.list})})):void 0]})};s.a.render(Object(h.jsx)(S,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.7bb3c078.chunk.js.map